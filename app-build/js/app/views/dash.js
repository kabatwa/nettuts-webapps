define(["jquery","underscore","backbone","app/collections/places","app/views/place","app/views/add_place"],function(e,t,n,r,i,s){var o=n.View.extend({html:["<h3>Dashboard page</h3>",'<div id="places-list" class="clearfix">Loading...</div>','<div id="dash-buttons">','<button id="btn-add-new" type="button" class="btn btn-default">Add New</button>',"</div>"].join(""),views:[],events:{"click #btn-add-new":"addNewPlace"},initialize:function(){this.$el.html(this.html),this.$placesList=this.$("#places-list"),this.$dashButtons=this.$("#dash-buttons"),this.collection=new r([]),this.listenTo(this.collection,"change destroy",this.render),this.collection.fetch(),window.debug={places:this.collection}},render:function(){var e=this;return this.cleanUp(),this.collection.length?this.collection.each(function(t,n,r){var s=new i({model:t,id:["place-",t.get("countryCode"),"-",t.get("name")].join("")});e.$placesList.append(s.render().el),e.views.push(s)}):this.$placesList.html("Sorry, there are no places to display, please add some."),this},addNewPlace:function(e){var t=new s({title:"Add a new place",id:"modal-add-new-place",collection:this.collection});t.show()},cleanUp:function(){for(var e=0;e<this.views.length;e++)this.views[e].remove();this.views.length=0,this.$placesList.html("")}});return o});