define(["jquery","underscore","backbone","app/templates","app/collections/days"],function(e,t,n,r,i){var s=n.View.extend({template:r.place,collection:new i([]),events:{"click #btn-remove":"removePlace","click #btn-expand":"openDetail"},initialize:function(){var e=this.template(this.model.toJSON());this.$el.html(e),this.$bodyEl=this.$(".panel-body")},render:function(){var e=this;return this.collection.url=["http://api.wunderground.com/api/","d48b724aca90503f","/forecast/q/",this.model.get("countryCode"),"/",this.model.get("name"),".json"].join(""),this.collection.fetch({success:function(t,n,r){e.renderDays()},error:function(e,t,n){console.log("There was an error")}}),this},renderDays:function(){var e=[];this.collection.each(function(t,n,i){e.push(r.day(t.toJSON()))}),this.$bodyEl.html(e.join(""))},removePlace:function(e){this.model.destroy()},openDetail:function(e){this.$(".panel").toggleClass("panel-detail")}});return s});